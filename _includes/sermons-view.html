

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      {{ include.year }}
    </h4>
  </div>
  <div class="panel-body">
  <div class="table-responsive">
    <table class="table table-striped">
      <tr>
        <td><b>Data</b></td>
        <td><b>Titolo</b></td>
        <td><b>Relatore</b></td>
        <td><b>Streaming</b></td>
        <td><b>Download</b></td>
      </tr>
      {% for sermon in site.data.sermons reversed %}
      {% capture curYear %} {{ sermon.data | date: '%Y' }} {% endcapture %}

      {% if curYear contains include.year %}

      <tr>
        <td>
          <p>{{ sermon.data }}<p>
          </td>
          <td>
            <p class="text-capitalize" role="button" data-toggle="collapse" href="#collapse-{{sermon.data}}" aria-expanded="false" aria-controls="collapseExample">
              {{ sermon.data | date:"%U"}} {{ sermon.titolo }}
            </p>
            <div class="collapse" id="collapse-{{sermon.data}}">
              <p class="text-muted">
               {{ sermon.descrizione }}
              </p>
            </div>
          </td>
        <td>
          <p>{{ sermon.relatore }}</p>
        </td>
        <td>
          <p><a href="{{ sermon.streaming }}" target="_blank" onclick="trackOutboundLink('{{ sermon.streaming }}'); return false;" >Ascolta</a></p>
        </td>
        <td>
          <p><a href="{{ sermon.download }}" target="_blank" onclick="trackOutboundLink('{{ sermon.download }}'); return false;" >Scarica</a></p>
        </td>
      </tr>
      {% endif %}
      {% endfor %}
    </table>
  </div>
  </div>
</div>

<script>
/**
* Function that tracks a click on an outbound link in Analytics.
* This function takes a valid URL string as an argument, and uses that URL string
* as the event label. Setting the transport method to 'beacon' lets the hit be sent
* using 'navigator.sendBeacon' in browser that support it.
*/
var trackOutboundLink = function(url) {
   ('send', 'event', 'outbound', 'click', url, {
     'transport': 'beacon',
     'hitCallback': function(){document.location = url;}
   });
}
</script>
